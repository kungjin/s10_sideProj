<!-- src/main/resources/mappers/StagingMapper.xml -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.of.mapper.StagingMapper">

  <insert id="insertRaw">
    INSERT INTO staging_raw (
      source, notice_no, item_no, payload_json, content_hash, received_at
    ) VALUES (
      #{source}, #{noticeNo}, #{itemNo}, #{payloadJson}, #{contentHash}, NOW(6)
    )
    ON DUPLICATE KEY UPDATE
      received_at = NOW(6);
  </insert>

</mapper>
