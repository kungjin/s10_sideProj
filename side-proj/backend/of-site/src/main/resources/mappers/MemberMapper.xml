<!-- src/main/resources/mappers/MemberMapper.xml -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.of.mapper.MemberMapper">

    <resultMap id="MemberMap" type="com.of.domain.Member">
        <id     property="id"           column="id"/>
        <result property="email"        column="email"/>
        <result property="passwordHash" column="password_hash"/>
        <result property="name"         column="name"/>
        <result property="birthDate"    column="birth_date"/>
        <result property="nationality"  column="nationality"/>
        <result property="phone"        column="phone"/>
        <result property="gender"       column="gender"/>
        <result property="role"         column="role"/>
    </resultMap>

    <select id="findByEmail" resultMap="MemberMap">
        SELECT
            id,
            email,
            password_hash,
            name,
            birth_date,
            nationality,
            phone,
            gender,
            role
        FROM member
        WHERE email = #{email}
    </select>

    <select id="findById" resultMap="MemberMap">
        SELECT
            id,
            email,
            password_hash,
            name,
            birth_date,
            nationality,
            phone,
            gender,
            role
        FROM member
        WHERE id = #{id}
    </select>

    <insert id="insertMember" parameterType="com.of.domain.Member">
        INSERT INTO member (
            email, password_hash,
            name, birth_date, nationality, phone, gender,
            role
        ) VALUES (
            #{email}, #{passwordHash},
            #{name}, #{birthDate}, #{nationality}, #{phone}, #{gender},
            #{role}
        )
    </insert>

</mapper>
